<!-- Modal -->
<div class="modal fade" id="bitcoin-info-modal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true" ng-controller="BitcoinController">
    <div class="modal-dialog" role="document">
        <!--Content-->
        <div class="modal-content">
            <!--Header-->
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
                <h4 class="modal-title" id="myModalLabel">Bitcoin</h4>


            </div>
            <!--Body-->
            <div class="modal-body">
                <!-- Nav tabs -->
                <ul class="nav bitcoin nav-tabs">
                    <li id="BTC-receive-tab" class="active">
                        <a  href="#BTC-receive" data-toggle="tab">Receive</a>
                    </li>
                    <li id="BTC-send-tab">
                        <a href="#BTC-send" data-toggle="tab">Send</a>
                    </li>
                    <li id="BTC-transactions-tab">
                        <a href="#BTC-transactions" data-toggle="tab">Transactions</a>
                    </li>
                    <li id="BTC-account-tab">
                            <a ng-if="user.privateBTCaddress" href="#BTC-account" data-toggle="tab">Your account</a>
                            <a ng-if="!user.privateBTCaddress" href="#BTC-account" data-toggle="tab">Add account</a>
                    </li>
                </ul>

                <div class="bitcoin tab-content ">
                    <div class="tab-pane active" id="BTC-receive">
                        <br>
                        <h3>Your Bitcoin Account Information</h3>
                        <br>
                        <p>Address:</p>
                        <div ng-if="!user.BTCaddress">
                            <br>
                            <h4> Loading User Information... </h4>
                            <br>
                        </div>
                        <h4 style="word-wrap: break-word;">{[{user.BTCaddress}]}</h4>
                        <img src="https://chart.googleapis.com/chart?chs=350x350&cht=qr&chl={[{user.BTCaddress}]}" alt="" style="width:100%; max-width:600px;">
                    </div>
                    <div class="tab-pane" id="BTC-send">
                        <br>
                        <h3>Send Bitcoin to an Address</h3>
                        <div class="error-message">
                            <br>
                            <h4 class='text-danger font-weight-bold'>{[{errorMessage}]}</h4>
                            <br>
                        </div>
                        <div style="width: 60%; display: inline-block; margin-right: 35px;">
                            <input type="text" id="BTC-send-address" class="form-control validate" placeholder="Receiving Address" ng-model="sendAddress">
                        </div>
                        <div style="width: 20%; display: inline-block;">
                            <input type="number" id="BTC-send-amount" class="form-control validate" placeholder="Amount" ng-model="sendAmount">
                        </div>
                        <br>

                        <h4>Sending {[{sendAmount || 0 | number:2}]} BTC ( {[{sendAmount * prices.BTCinUSD || 0 | number: 2}]} USD ) </h4>
                        <br>
                        <input class="btn btn-primary btn-lg" type="submit" value="Send" ng-click="sendBitcoin()">

                    </div>
                    <div class="tab-pane" id="BTC-transactions">
                        <br>
                        <h3>Transactions</h3>
                        <br>
                        <div ng-if="!gotBTCTransactions">
                            <br>
                            <h4> Fetching Transactions </h4>
                            <br>
                        </div>
                        <div class="table-responsive" ng-if="gotBTCTransactions">
                            <table class="table table-striped" style="text-align: left">
                                <tr>
                                    <th style="min-width: 120px;">Date</th>
                                    <th>Txn Hash</th>
                                    {{!-- <th>Type</th> --}}
                                    <th>Amount</th>
                                    {{!-- <th>from</th> --}}
                                    {{!-- <th>to</th> --}}
                                    <th>Confirmations</th>
                                </tr>
                                <tr ng-repeat="txn in BTCtransactions">
                                    <td> {[{txn.createdAt | date:'dd-MM-yy HH:mm'}]} </td>
                                    <td> <a href="https://blockchain.info/tx/{[{txn.address}]}">{[{txn.address}]}</a> </td>
                                    {{!-- <td> {[{txn.funcName}]} </td> --}}
                                    <td> {[{txn.quantity}]} </td>
                                    {{!-- <td> {[{txn.from}]} </td> --}}
                                    {{!-- <td> {[{txn.to}]} </td> --}}
                                    <td> {[{txn.confirmations}]} </td>

                                </tr>
                            </table>
                        </div>
                    </div>
                    <div class="tab-pane" id="BTC-account">
                        <br>
                        <h3>Add a Bitcoin account</h3>
                        <br>
                        <!--Add a check to see if account is added-->
                        <div ng-if="true">
                            <h4> No account registered yet</h4>
                            <div class="error-message">
                                <br>
                                <h4 class='text-danger font-weight-bold'>{[{addAccountErrorMessage}]}</h4>
                                <br>
                            </div>
                            <br>
                            <input type="text" id="BTC-add-account" class="form-control validate" placeholder="Add an account" ng-model="addedBtcAccount">
                            <input class="btn btn-primary btn-lg" type="submit" value="Add" ng-click="addBtcAccount()">

                        </div>
                        <div ng-if="false">
                            <h4>Your Bitcoin Account Information</h4>
                            <br>
                            <p>Address:</p>
                            <h4>{[{user.BTCaddress}]}</h4>
                            <br>
                            <h4>0 BTC</h4>

                        </div>
                    </div>
                </div>

            </div>

            <!--&lt;!&ndash;Footer&ndash;&gt;-->
            <!--<div class="modal-footer">-->
                <!--<button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>-->
                <!--<button type="button" class="btn btn-primary">Save changes</button>-->
            <!--</div>-->
        </div>
        <!--/.Content-->
    </div>
</div>
<!-- /.Live preview-->

<style>
    .tab-content {
        text-align: center;
    }
</style>